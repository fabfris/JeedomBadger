= Configuration du plugin

Après téléchargement du plugin il vous faut l'activer, aucune configuration n'est necessaire. Vous pouvez vous rendre immédiatement sur la page du plug-in apres activation pour gérer les équipements.


= Configuration du materiel

Ce plug-in s'interface avec des arduino / ESP connectés en réseau éxécutant un sketch spécifique. Sur ces arduino on connecte le lecteur de badge wiegand. Le protocol wiegand permet une longue distance de câble entre l'arduino et le lecteur.
Les lecteurs de badge doivent supporter au moins un des protocoles wiegand 8,26 ou 34.  Les lecteurs peuvent etre RFID (125 Khz) ou NFC ( 13.56 Mhz) et pourvu ou non d'un clavier a code. 
Exemple : https://www.zkteco.eu/index.php/categories-11/access-control-systems/rfid-external-readers
Ces lecteurs sont disponible dans différents design a bas prix sur les sites chinois ou ebay ( Rechercher "wiegand"). 

image::../images/screen2.png[]

Plusieurs exemple de sketch arduino sont fourni ( voir la page de configuration du plug-in )
=== Arduino + Interface reseau ENC28J   	
( Testé sur Duemilanove 168/328 et Uno )
Dans ce sketch 2 parametres sont a définir :  L'adresse IP du serveur Jeedom et le Numero de lecteur sur le reseau ( a incrémenter )

image::../images/inosettings_enc28j60.png[]

Câblage :

image::../images/arduinowiring_enc28j60.png[]

=== Arduino + Interface reseau W5100 		
( Testé sur Uno et Mega 2560 )
Dans ce sketch 2 parametres sont a définir :  L'adresse IP du serveur Jeedom et le Numero de lecteur sur le reseau ( a incrémenter )

image::../images/inosettings_w5100.png[]

Câblage :

image::../images/arduinowiring_w5100.png[]




= Configuration des équipements

La configuration des équipements Badger est divisée en 4 sections : Configuration générale, Lecteurs, Badges et Codes. 

image::../images/screen1.JPG[]

== Configuration générale

La configuration générale dispose d'un raccourci vers la page de configuration/installation du plug-in, un lien vers la documentation, et un bouton pour activer ou désactiver le mode inclusion.
Le mode inclusion permet d'ajouter automatiquement un nouveau lecteur de badge ou d'enregistrer un nouveau badge.

Pour ajouter un nouveau lecteur de badge , il faudra donc suivre la procedure suivante :
- Configurer l'arduino ( cf chapitre plus bas )
- Activer le mode inclusion sur Jeedom

Vous retrouvez ici toute la configuration de votre équipement : 

* *Nom de l'équipement* : nom de votre équipement Badger
* *Objet parent* : indique l'objet parent auquel appartient l'équipement
* *Activer* : permet de rendre votre équipement actif
* *Visible* : le rend visible sur le dashboard
* *Catégorie* : les catégories de l'équipement (il peut appartenir à plusieurs catégories)
* *ID* : ID logique de l'équipement dans le superviseur, il est recommandé de ne pas y toucher
* *IP* : IP du superviseur (à titre indicatif pour le moment)

En dessous vous retrouvez la configuration de l'équipement. : 

* le nom affiché sur le dashboard
* le sous-type
* ID logique de la commande dans le superviseur, il est recommandé de ne pas y toucher
* historiser : permet d'historiser la donnée
* afficher : permet d'afficher la donnée sur le dashboard
* unité : unité de la donnée (peut être vide)
* min/max : bornes de la donnée (peuvent être vides)
* configuration avancée (petites roues crantées) : permet d'afficher la configuration avancée de la commande (méthode d'historisation, widget...)
* Tester : permet de tester la commande
* supprimer (signe -) : permet de supprimer la commande